<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sunshine: src/display_device.h File Reference</title>
<link rel="icon" href="sunshine.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Sunshine"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxyconfig.css" rel="stylesheet" type="text/css"/>
<link href="doc-styles.css" rel="stylesheet" type="text/css"/>
<!--FONTAWESOME START-->
<link href="assets/fontawesome/css/all.min.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="assets/fontawesome/js/all.min.js"></script>
<!--FONTAWESOME END-->
<!--DOXYGEN-AWESOME START-->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="doxyconfig-readthedocs-search.js"></script>
<script type="text/javascript">
  DoxygenAwesomeDarkModeToggle.init()
  DoxygenAwesomeFragmentCopyButton.init()
  DoxygenAwesomeParagraphLink.init()
  DoxygenAwesomeInteractiveToc.init()
  DoxygenAwesomeTabs.init()
  ReadtheDocsSearch.init()
</script>
<!--DOXYGEN-AWESOME END-->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="sunshine.png"/></td>
  <td id="projectalign">
   <div id="projectname">Sunshine
   </div>
   <div id="projectbrief">Self-hosted game stream host for Moonlight.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,true,'search.html','Search',true);
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('display__device_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">display_device.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Declarations for display device handling.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;filesystem&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;display_device/types.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for display_device.h:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display__device_8h__incl.svg" width="363" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="display__device_8h__dep__incl.svg" width="100%" height="396"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</div>
<p><a href="display__device_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdisplay__device_1_1configuration__disabled__tag__t.html">display_device::configuration_disabled_tag_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A tag structure indicating that configuration is disabled.  <a href="structdisplay__device_1_1configuration__disabled__tag__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdisplay__device_1_1failed__to__parse__tag__t.html">display_device::failed_to_parse_tag_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A tag structure indicating that configuration parsing has failed.  <a href="structdisplay__device_1_1failed__to__parse__tag__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a32ad14466b4ee7982d208efd29012354" id="r_a32ad14466b4ee7982d208efd29012354"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display__device_8cpp.html#a32ad14466b4ee7982d208efd29012354">display_device::configure_display</a> (const <a class="el" href="structconfig_1_1video__t.html">config::video_t</a> &amp;video_config, const <a class="el" href="structrtsp__stream_1_1launch__session__t.html">rtsp_stream::launch_session_t</a> &amp;session)</td></tr>
<tr class="memdesc:a32ad14466b4ee7982d208efd29012354"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the display device based on the user configuration and the session information.  <br /></td></tr>
<tr class="separator:a32ad14466b4ee7982d208efd29012354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a327c6fb42eeeb82185bbc3af3cf20979" id="r_a327c6fb42eeeb82185bbc3af3cf20979"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display__device_8cpp.html#a327c6fb42eeeb82185bbc3af3cf20979">display_device::configure_display</a> (const SingleDisplayConfiguration &amp;config)</td></tr>
<tr class="memdesc:a327c6fb42eeeb82185bbc3af3cf20979"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the display device using the provided configuration.  <br /></td></tr>
<tr class="separator:a327c6fb42eeeb82185bbc3af3cf20979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa54ea423c6d3d3cce1c9f30a0935228d" id="r_aa54ea423c6d3d3cce1c9f30a0935228d"><td class="memItemLeft" align="right" valign="top">EnumeratedDeviceList&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display__device_8cpp.html#aa54ea423c6d3d3cce1c9f30a0935228d">display_device::enumerate_devices</a> ()</td></tr>
<tr class="memdesc:aa54ea423c6d3d3cce1c9f30a0935228d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumerate the available devices.  <br /></td></tr>
<tr class="separator:aa54ea423c6d3d3cce1c9f30a0935228d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fde5866033facfcff45422ebacd05d7" id="r_a1fde5866033facfcff45422ebacd05d7"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classplatf_1_1deinit__t.html">platf::deinit_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display__device_8cpp.html#a1fde5866033facfcff45422ebacd05d7">display_device::init</a> (const std::filesystem::path &amp;persistence_filepath, const <a class="el" href="structconfig_1_1video__t.html">config::video_t</a> &amp;video_config)</td></tr>
<tr class="memdesc:a1fde5866033facfcff45422ebacd05d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the implementation and perform the initial state recovery (if needed).  <br /></td></tr>
<tr class="separator:a1fde5866033facfcff45422ebacd05d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbec3c2e5a77f8d7906407110bcf5ff5" id="r_acbec3c2e5a77f8d7906407110bcf5ff5"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display__device_8cpp.html#acbec3c2e5a77f8d7906407110bcf5ff5">display_device::map_output_name</a> (const std::string &amp;output_name)</td></tr>
<tr class="memdesc:acbec3c2e5a77f8d7906407110bcf5ff5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map the output name to a specific display.  <br /></td></tr>
<tr class="separator:acbec3c2e5a77f8d7906407110bcf5ff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13d7db8105180dedd47832acaf0fd8ac" id="r_a13d7db8105180dedd47832acaf0fd8ac"><td class="memItemLeft" align="right" valign="top">std::variant&lt; <a class="el" href="structdisplay__device_1_1failed__to__parse__tag__t.html">failed_to_parse_tag_t</a>, <a class="el" href="structdisplay__device_1_1configuration__disabled__tag__t.html">configuration_disabled_tag_t</a>, SingleDisplayConfiguration &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display__device_8cpp.html#a13d7db8105180dedd47832acaf0fd8ac">display_device::parse_configuration</a> (const <a class="el" href="structconfig_1_1video__t.html">config::video_t</a> &amp;video_config, const <a class="el" href="structrtsp__stream_1_1launch__session__t.html">rtsp_stream::launch_session_t</a> &amp;session)</td></tr>
<tr class="memdesc:a13d7db8105180dedd47832acaf0fd8ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the user configuration and the session information.  <br /></td></tr>
<tr class="separator:a13d7db8105180dedd47832acaf0fd8ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbe93253aa71514fa18accdb45ef1390" id="r_abbe93253aa71514fa18accdb45ef1390"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display__device_8cpp.html#abbe93253aa71514fa18accdb45ef1390">display_device::reset_persistence</a> ()</td></tr>
<tr class="memdesc:abbe93253aa71514fa18accdb45ef1390"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the persistence and currently held initial display state.  <br /></td></tr>
<tr class="separator:abbe93253aa71514fa18accdb45ef1390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1be8d50acef1df106cfa5d79fa17c048" id="r_a1be8d50acef1df106cfa5d79fa17c048"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display__device_8cpp.html#a1be8d50acef1df106cfa5d79fa17c048">display_device::revert_configuration</a> ()</td></tr>
<tr class="memdesc:a1be8d50acef1df106cfa5d79fa17c048"><td class="mdescLeft">&#160;</td><td class="mdescRight">Revert the display configuration and restore the previous state.  <br /></td></tr>
<tr class="separator:a1be8d50acef1df106cfa5d79fa17c048"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Declarations for display device handling. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a32ad14466b4ee7982d208efd29012354" name="a32ad14466b4ee7982d208efd29012354"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32ad14466b4ee7982d208efd29012354">&#9670;&#160;</a></span>configure_display() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_device::configure_display </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structconfig_1_1video__t.html">config::video_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>video_config</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structrtsp__stream_1_1launch__session__t.html">rtsp_stream::launch_session_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>session</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the display device based on the user configuration and the session information. </p>
<dl class="section note"><dt>Note</dt><dd>This is a convenience method for calling similar method of a different signature.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">video_config</td><td>User's video related configuration. </td></tr>
    <tr><td class="paramname">session</td><td>Session information.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Examples</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> std::shared_ptr&lt;rtsp_stream::launch_session_t&gt; launch_session;</div>
<div class="line"><span class="keyword">const</span> <a class="code hl_struct" href="structconfig_1_1video__t.html">config::video_t</a> &amp;video_config { config::video };</div>
<div class="line"> </div>
<div class="line">configure_display(video_config, *launch_session);</div>
<div class="ttc" id="astructconfig_1_1video__t_html"><div class="ttname"><a href="structconfig_1_1video__t.html">config::video_t</a></div><div class="ttdef"><b>Definition</b> config.h:22</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a327c6fb42eeeb82185bbc3af3cf20979" name="a327c6fb42eeeb82185bbc3af3cf20979"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a327c6fb42eeeb82185bbc3af3cf20979">&#9670;&#160;</a></span>configure_display() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_device::configure_display </td>
          <td>(</td>
          <td class="paramtype">const SingleDisplayConfiguration &amp;</td>          <td class="paramname"><span class="paramname"><em>config</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the display device using the provided configuration. </p>
<p>In some cases configuring display can fail due to transient issues and we will keep trying every 5 seconds, even if the stream has already started as there was no possibility to apply settings before the stream start.</p>
<p>Therefore, there is no return value as we still want to continue with the stream, so that the users can do something about it once they are connected. Otherwise, we might prevent users from logging in at all if we keep failing to apply configuration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Configuration for the display.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Examples</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> SingleDisplayConfiguration valid_config { };</div>
<div class="line">configure_display(valid_config);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="aa54ea423c6d3d3cce1c9f30a0935228d" name="aa54ea423c6d3d3cce1c9f30a0935228d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa54ea423c6d3d3cce1c9f30a0935228d">&#9670;&#160;</a></span>enumerate_devices()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">EnumeratedDeviceList display_device::enumerate_devices </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enumerate the available devices. </p>
<dl class="section return"><dt>Returns</dt><dd>A list of devices.</dd></dl>
<p><b>Examples</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> devices = enumerate_devices();</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a1fde5866033facfcff45422ebacd05d7" name="a1fde5866033facfcff45422ebacd05d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fde5866033facfcff45422ebacd05d7">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="classplatf_1_1deinit__t.html">platf::deinit_t</a> &gt; display_device::init </td>
          <td>(</td>
          <td class="paramtype">const std::filesystem::path &amp;</td>          <td class="paramname"><span class="paramname"><em>persistence_filepath</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structconfig_1_1video__t.html">config::video_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>video_config</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the implementation and perform the initial state recovery (if needed). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">persistence_filepath</td><td>File location for reading/saving persistent state. </td></tr>
    <tr><td class="paramname">video_config</td><td>User's video related configuration. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A deinit_t instance that performs cleanup when destroyed.</dd></dl>
<p><b>Examples</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> <a class="code hl_struct" href="structconfig_1_1video__t.html">config::video_t</a> &amp;video_config { config::video };</div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> init_guard { init(<span class="stringliteral">&quot;/my/persitence/file.state&quot;</span>, video_config) };</div>
</div><!-- fragment --> 
</div>
</div>
<a id="acbec3c2e5a77f8d7906407110bcf5ff5" name="acbec3c2e5a77f8d7906407110bcf5ff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbec3c2e5a77f8d7906407110bcf5ff5">&#9670;&#160;</a></span>map_output_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string display_device::map_output_name </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>output_name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map the output name to a specific display. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output_name</td><td>The user-configurable output name. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Mapped display name or empty string if the output name could not be mapped.</dd></dl>
<p><b>Examples</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> mapped_name_config { map_output_name(config::video.output_name) };</div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> mapped_name_custom { map_output_name(<span class="stringliteral">&quot;{some-device-id}&quot;</span>) };</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a13d7db8105180dedd47832acaf0fd8ac" name="a13d7db8105180dedd47832acaf0fd8ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13d7db8105180dedd47832acaf0fd8ac">&#9670;&#160;</a></span>parse_configuration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::variant&lt; failed_to_parse_tag_t, configuration_disabled_tag_t, SingleDisplayConfiguration &gt; display_device::parse_configuration </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structconfig_1_1video__t.html">config::video_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>video_config</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structrtsp__stream_1_1launch__session__t.html">rtsp_stream::launch_session_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>session</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse the user configuration and the session information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">video_config</td><td>User's video related configuration. </td></tr>
    <tr><td class="paramname">session</td><td>Session information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Parsed single display configuration or a tag indicating that the parsing has failed or a tag indicating that the user does not want to perform any configuration.</dd></dl>
<p><b>Examples</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> std::shared_ptr&lt;rtsp_stream::launch_session_t&gt; launch_session;</div>
<div class="line"><span class="keyword">const</span> <a class="code hl_struct" href="structconfig_1_1video__t.html">config::video_t</a> &amp;video_config { config::video };</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> config { parse_configuration(video_config, *launch_session) };</div>
<div class="line"><span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *parsed_config { std::get_if&lt;SingleDisplayConfiguration&gt;(&amp;result) }; parsed_config) {</div>
<div class="line">   <a class="code hl_function" href="display__device_8cpp.html#a32ad14466b4ee7982d208efd29012354">configure_display</a>(*config);</div>
<div class="line">}</div>
<div class="ttc" id="adisplay__device_8cpp_html_a32ad14466b4ee7982d208efd29012354"><div class="ttname"><a href="display__device_8cpp.html#a32ad14466b4ee7982d208efd29012354">display_device::configure_display</a></div><div class="ttdeci">void configure_display(const config::video_t &amp;video_config, const rtsp_stream::launch_session_t &amp;session)</div><div class="ttdoc">Configure the display device based on the user configuration and the session information.</div><div class="ttdef"><b>Definition</b> display_device.cpp:760</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="abbe93253aa71514fa18accdb45ef1390" name="abbe93253aa71514fa18accdb45ef1390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbe93253aa71514fa18accdb45ef1390">&#9670;&#160;</a></span>reset_persistence()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool display_device::reset_persistence </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset the persistence and currently held initial display state. </p>
<p>This is normally used to get out of the "broken" state where the algorithm wants to restore the initial display state, but it is no longer possible.</p>
<p>This could happen if the display is no longer available or the hardware was changed and the device ids no longer match.</p>
<p>The user then accepts that Sunshine is not able to restore the state and "agrees" to do it manually.</p>
<dl class="section return"><dt>Returns</dt><dd>True if persistence was reset, false otherwise. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Whether the function succeeds or fails, any of the scheduled "retries" from other methods will be stopped to not interfere with the user actions.</dd></dl>
<p><b>Examples</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> result = reset_persistence();</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a1be8d50acef1df106cfa5d79fa17c048" name="a1be8d50acef1df106cfa5d79fa17c048"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1be8d50acef1df106cfa5d79fa17c048">&#9670;&#160;</a></span>revert_configuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_device::revert_configuration </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Revert the display configuration and restore the previous state. </p>
<p>In case the state could not be restored, by default it will be retried again in 5 seconds (repeating indefinitely until success or until persistence is reset).</p>
<p><b>Examples</b> </p><div class="fragment"><div class="line">revert_configuration();</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="display__device_8h.html">display_device.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
